<div style="" class="table-responsive">
    <table class="table table-condensed table-hover table-striped" id="role_table" style="table-layout:fixed; ">

        <?php if(count($roles) != 0): ?>

        <tr>
            <th style="width:25px;"></th>
            <th style="width:25px;"></th>
            <th style="width:150px;">Role</th>
            <th style="padding-left:25px;">Description</th>
            <th style="padding-left:25px;">Created</th>
            <th style="padding-left:25px;">Updated</th>
        </tr>

        <?php foreach($roles as $index => $role): ?>
        <tr class="draggable-row drag-unassigned-role">
            <div style="margin-top:9px;">
                <td><span><a style="" href="#" data-request-confirm="Are you sure you want to assign this role to the selected group?" data-request="onAssignRole" data-request-data="roleCode: '<?= $role->code ?>'"><i class="icon-caret-left"></i></a></span></td>
                <td><span><a style="" href="#" data-request-confirm="Are you sure you want to delete this role? This cannot be undone." data-request="onRemoveRole" data-request-data="roleCode: '<?= $role->code ?>'"><i class="icon-times"></i></a></span></td>
                <td style=""><span><a data-size="huge" href="javascript:;" data-control="popup" data-handler="onOpenRole" data-extra-data="roleCode: '<?= $role->code ?>'" ><?= $role->name ?></a></span></td>
                <!--data-size="huge" href="javascript:;" data-control="popup" data-request="onOpenRole" data-request-data="roleCode: '<?= $role->code ?>'"-->
                <td style="padding-left:25px;overflow:hidden;white-space: nowrap;"><span><?= $role->description ?></span></td>
                <td style="padding-left:25px;overflow:hidden;white-space: nowrap;"><span><?= $role->created_at ?></span></td>
                <td style="padding-left:25px;overflow:hidden;white-space: nowrap;"><span><?= $role->updated_at ?></span></td>
            </div>
        </tr>
        <?php endforeach; else: ?>
        <tr>
            <td>
                <span>No roles currently exist in this group</span>
            </td>
        </tr>
        <?php endif ?>
    </table>
</div>

<script>
    interact('.draggable-row')
        .draggable({
            // enable inertial throwing
            inertia: true,
            // keep the element within the area of it's parent

            // enable autoScroll
            autoScroll: true,
            restrict: {
                restriction: "drop_container",
                endOnly: true,
                elementRect: { top: 0, left: 0, bottom: 1, right: 1 }
            },
            // call this function on every dragmove event
            onmove: dragMoveListener,
            // call this function on every dragend event
        });

        function dragMoveListener (event) {
            var target = event.target,
                // keep the dragged position in the data-x/data-y attributes
                x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
                y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

            // translate the element
            target.style.webkitTransform =
                target.style.transform =
                    'translate(' + x + 'px, ' + y + 'px)';

            // update the posiion attributes
            target.setAttribute('data-x', x);
            target.setAttribute('data-y', y);
        }

        // this is used later in the resizing and gesture demos
        window.dragMoveListener = dragMoveListener;
</script>